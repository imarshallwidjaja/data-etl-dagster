{# Run status fragment for HTMX polling - returns partial HTML for status updates #}
<div id="run-status" 
     {% if run.status == 'STARTED' or run.status == 'QUEUED' or run.status == 'NOT_STARTED' %}
     hx-get="/runs/{{ run.run_id }}/status" 
     hx-trigger="every 5s"
     hx-swap="outerHTML"
     {% endif %}>
    
    <div class="status-display">
        {% if run.status == 'SUCCESS' %}
        <span class="badge badge-success">{{ run.status }}</span>
        {% elif run.status == 'FAILURE' %}
        <span class="badge badge-error">{{ run.status }}</span>
        {% elif run.status == 'STARTED' or run.status == 'QUEUED' or run.status == 'NOT_STARTED' %}
        <span class="badge badge-warning" aria-busy="true">{{ run.status }}</span>
        {% elif run.status == 'CANCELED' %}
        <span class="badge badge-info">{{ run.status }}</span>
        {% else %}
        <span class="badge badge-info">{{ run.status }}</span>
        {% endif %}
    </div>
    
    {% if run.status == 'SUCCESS' and run.ended_at %}
    <p><small>Completed at {{ run.ended_at }}</small></p>
    {% elif run.status == 'FAILURE' and run.error_message %}
    <details>
        <summary>Error Details</summary>
        <pre>{{ run.error_message }}</pre>
    </details>
    {% elif run.status == 'STARTED' or run.status == 'QUEUED' or run.status == 'NOT_STARTED' %}
    <p><small>Auto-refreshing every 5 seconds...</small></p>
    {% endif %}
</div>
